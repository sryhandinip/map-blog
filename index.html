<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Map Blog</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, sans-serif;
    }

    body {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      flex: 0 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 16px;
      border-bottom: 1px solid #ddd;
      background: #fff;
    }

    .nav-tabs {
      display: flex;
      gap: 8px;
    }

    .nav-tab {
      border: 1px solid #ddd;
      padding: 6px 12px;
      border-radius: 999px;
      cursor: pointer;
      background: #f3f3f3;
    }

    .nav-tab.active {
      background: #222;
      color: #fff;
      border-color: #222;
    }

    #main {
      flex: 1 1 auto;
      display: flex;
      position: relative;
    }

    /* Map always visible on the left */
    #map {
      flex: 1 1 auto;
    }

    /* Right pane handles both sidebar + profile */
    #right-pane {
      width: 30%;
      border-left: 1px solid #ddd;
      background: #fff;
      overflow-y: auto;
      padding: 16px;
    }

    #sidebar, #profile {
      display: none;
    }

    /* Active pane shows */
    .active-pane {
      display: block !important;
    }

    .profile-links a {
      display: inline-block;
      margin-right: 10px;
      margin-bottom: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #ccc;
      text-decoration: none;
      color: #333;
    }

    .popup-image {
      max-width: 220px;
      margin: 8px 0;
      border-radius: 6px;
    }
  </style>
</head>

<body>

<header>
  <div class="site-title">My Map Blog</div>
  <div class="nav-tabs">
    <button class="nav-tab active" id="tab-map">Map Blog</button>
    <button class="nav-tab" id="tab-profile">Profile / CV</button>
  </div>
</header>

<div id="main">
  <!-- LEFT SIDE: MAP ALWAYS VISIBLE -->
  <div id="map"></div>

  <!-- RIGHT SIDE: SWITCHABLE PANE -->
  <div id="right-pane">

    <!-- SIDEBAR (MAP BLOG) -->
    <div id="sidebar" class="active-pane">
      <h1>My Map Blog</h1>
      <div id="post">
        <p>Click a point on the map or choose a title below.</p>
      </div>

      <div id="marker-list"></div>
    </div>

    <!-- PROFILE PANE -->
    <div id="profile">
      <h2>About Me</h2>

      <h3>Short Profile</h3>
      <p>
        I am a geographer and GIS specialist with experience in cartography,
        remote sensing, and disaster risk management.
      </p>

      <h3>Curriculum Vitae (CV)</h3>
      <p>
        <a href="YOUR_CV_LINK_HERE.pdf" target="_blank">View full CV (PDF)</a>
      </p>

      <h3>Find Me Online</h3>
      <div class="profile-links">
        <a href="https://www.linkedin.com/in/sry-handini-puteri-65631181/?locale=en_US" target="_blank">LinkedIn</a>
        <a href="https://medium.com/@sryhandiniputeri" target="_blank">Medium</a>
        <a href="mailto:sryhandiniputeri@gmail.com">Email Me</a>
      </div>
    </div>

  </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* =======================
   POSTS + POPUPS
======================= */
const posts = [
  {
    id: "palu",
    title: "Where I spent my childhood",
    date: "2013",
    coords: [-0.8917, 119.8707],
    content: `
      <p class="post-date">27 November 2025 · Palu</p>
      <p>Palu, or 'hammer', is the capital city of Central Sulawesi.</p>
      <p>I grew up in this city where I can proudly say that I am a Kailinese.</p>
    `,
    popupContent: `
      <h3>Where I spent my childhood</h3>
      <p>Palu, the capital city of Central Sulawesi.</p>
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Palu_Bridge.jpg/320px-Palu_Bridge.jpg"
           class="popup-image">
      <p><a href="https://en.wikipedia.org/wiki/Palu" target="_blank">More about Palu</a></p>
    `
  },
  {
    id: "yogyakarta",
    title: "My Bachelor Year",
    date: "2013",
    coords: [-7.7705, 110.3776],
    content: `
      <p class="post-date">27 November 2025 · Yogyakarta</p>
      <p>I majored in Cartography and Remote Sensing at UGM.</p>
    `,
    popupContent: `
      <h3>My Bachelor Year</h3>
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Gedung_Pusat_UGM.jpg/320px-Gedung_Pusat_UGM.jpg"
           class="popup-image">
      <p><a href="https://doi.org/10.1234/example" target="_blank">Related publication</a></p>
    `
  },
  {
    id: "bangkok",
    title: "Work in Bangkok",
    date: "2022",
    coords: [13.7563, 100.5018],
    content: `
      <p class="post-date">27 November 2025 · Bangkok</p>
      <p>I worked as a GIS officer in an international organization.</p>
    `,
    popupContent: `
      <h3>Work in Bangkok</h3>
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Bangkok_Skyline.jpg/320px-Bangkok_Skyline.jpg"
           class="popup-image">
      <p><a href="https://medium.com/@sryhandiniputeri" target="_blank">Read my Medium posts</a></p>
    `
  }
];

/* =======================
   MAP INIT
======================= */
const map = L.map("map").setView([20, 0], 2);

L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png", {
  attribution: "© CARTO & OpenStreetMap"
}).addTo(map);

const postContainer = document.getElementById("post");
const listContainer = document.getElementById("marker-list");

/* =======================
   MARKERS + SIDEBAR POSTS
======================= */
function showPost(post) {
  postContainer.innerHTML = `<h2>${post.title}</h2>${post.content}`;
}

posts.forEach(post => {
  const marker = L.marker(post.coords).addTo(map);
  marker.bindTooltip(post.title);
  marker.bindPopup(post.popupContent);

  marker.on("click", () => {
    map.setView(post.coords, 10);
    showPost(post);
    marker.openPopup();
  });

  const item = document.createElement("div");
  item.innerHTML = `
    <span class="marker-link">${post.title}</span>
    <span style="color:#777; font-size:0.9rem;"> – ${post.date}</span>
    <br>
  `;

  item.querySelector(".marker-link").onclick = () => {
    map.setView(post.coords, 10);
    showPost(post);
    marker.openPopup();
  };

  listContainer.appendChild(item);
});

/* =======================
   TAB SWITCHING (RIGHT PANEL ONLY)
======================= */
const tabMap = document.getElementById("tab-map");
const tabProfile = document.getElementById("tab-profile");
const sidebar = document.getElementById("sidebar");
const profile = document.getElementById("profile");

tabMap.addEventListener("click", () => {
  tabMap.classList.add("active");
  tabProfile.classList.remove("active");
  sidebar.classList.add("active-pane");
  profile.classList.remove("active-pane");
});

tabProfile.addEventListener("click", () => {
  tabProfile.classList.add("active");
  tabMap.classList.remove("active");
  profile.classList.add("active-pane");
  sidebar.classList.remove("active-pane");
});
</script>

</body>
</html>
